group_vars:
  hosts:
    # Define IP addresses in management
    dev-private-router01: 192.168.2.1
    dev-compute01: 192.168.2.11
    dev-compute02: 192.168.2.12
    dev-compute03: 192.168.2.13

  ntp:
    ip:
      allow: 192.168.2.0/24
      server: dev-private-router01

  sql:
    bind_address: 192.168.2.1
    max_connections: 4096
    password: secret

  mq:
    user_name: openstack
    password: secret

  memcached:
    listen_ip: 192.168.2.1

  etcd:
    initial_cluster_token: etcd-cluster-01

  keystone:
    user: keystone
    group: keystone
    password: secret
    configs:
      keystone_conf:
        token:
          provider: fernet
    auth_url: http://dev-private-router01:5000/v3

  # Glance is an image service
  glance:
    user: glance
    group: glance
    password: secret
    domain: default
    service:
      name: glance
      description: "OpenStack Image"
      type: image
    endpoints:
      public:
        regions:
          # Endpoints will be created at these regions. Regions specified here must be existed at "group_vars.openstack.region.name"
          - name: RegionOne
            url: http://dev-private-router01:9292
      internal:
        regions:
          - name: RegionOne
            url: http://dev-private-router01:9292
      admin:
        regions:
          - name: RegionOne
            url: http://dev-private-router01:9292

  openstack:
    admin_user_name: admin
    admin_project_name: admin
    admin_password: secret
    package:
      repository: 'deb http://ubuntu-cloud.archive.canonical.com/ubuntu focal-updates/wallaby main'
      keyserver: keyserver.ubuntu.com
      id: 5EDB1B62EC4926EA
    region:
      # Create default region
      name: RegionOne

    # Domains belonging in this array will all be created except that "default" domain.
    domains:
      - name: default
        description: "Default domain of OpenStack"
        users:
          # User for testing
          - name: myuser
            password: secret
          # User for glance API
          - name: glance
            password: secret
        projects:
          - name: myproject
            description: "Demo Project"
          - name: service
            description: "Service Project"
      - name: example
        description: "An example domain"

    roles:
      - name: myrole
        assigners:
          # There are some restrictions
          #   domain: Domain must be existed at "group_vars.openstack.domains[]"
          #   project: Project must be existed in the domain at "group_vars.openstack.domains[].projects[]"
          #   user: User must be existed in the project at "group_vars.openstack.domains[]"

          # Test user
          - user: myuser
            domain: default
            project: myproject
